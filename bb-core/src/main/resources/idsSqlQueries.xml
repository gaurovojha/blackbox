<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<entry key="all.ids.application.fetch">
		select app.BB_APPLICATION_ID , app.FAMILY_ID, app.IDS_RELEVANT_STATUS, jurisdiction.CODE, ref.UNCITED_COUNT, (CASE WHEN appFiled.MAXFILEDDATE1>appFiled.MAXFILEDDATE2 THEN appFiled.MAXFILEDDATE1
		ELSE appFiled.MAXFILEDDATE2 END) as LAST_FILING_DATE
		from BB_APPLICATION_BASE app, 
		BB_MSTR_JURISDICTION jurisdiction,
		(select count(irf.REFERENCE_FLOW_STATUS) as UNCITED_COUNT, irf.SOURCE_APPLICATION_ID as REF_APPLICATION_ID from BB_IDS_REFERENCE_FLOW irf where irf.REFERENCE_FLOW_STATUS in ('UNCITED') 
		group by irf.SOURCE_APPLICATION_ID having count(irf.REFERENCE_FLOW_STATUS)>=1) SUBTABLE_REFERENCE_FLOW ref,
		(select ex.APPLICATION_ID AS APPID, MAX(ex.FILING_DATE) as MAXFILEDDATE1, MAX(in.FILING_DATE) as MAXFILEDDATE2 FROM 
		EXTERNAL_IDS_FILING ex JOIN INTERNAL_IDS_FILING ON ex.APPLICATION_ID = in.APPLICATION_ID) APPLICATIONFILED appFiled
		WHERE app.BB_JURISDICTION = jurisdiction.BB_JURISDICTION_ID AND app.BB_APPLICATION_ID = ref.REF_APPLICATION_ID AND app.BB_APPLICATION_ID = appFiled.APPID;
	</entry>
</properties>